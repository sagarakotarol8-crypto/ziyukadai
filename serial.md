## シリアル通信

arduino とデバイス間でシリアル通信をつなぐのは「通信オブジェクト」です。通信オブジェクトを作成しデータを渡すことで、別デバイスへ送ることができます。また、通信オブジェクトにシリアル通信の読み取りを要求することで、ほかデバイスからデータを受け取ることができます。

## シリアル通信を使うための準備(コードの書き方)

シリアル通信をするにあたって必要な準備は、次の2つです。

①通信用インスタンスの作成

②シリアル通信の設定・開始関数の呼び出し

#### DFRobotDFPlayerMini



> ライブラリ「DFRobotDFPlayerMini.h」のインストールが必要です。

> また、コードの頭で
> ```arduino
> #include<DFRobotDFPlayerMini.h>
> ```
> を設定することを忘れないでください。



シリアル通信を担当する通信用インスタンスが必要となります。ですので、通信用インスタンスを作成します。
名前はDFPとしています。DFRobotDFPlayerMiniは設計図にあたります。

```arduino
DFRobotDFPlayerMini DFP;
```



通信用インスタンスを作成しましたが、通信速度や通信ポートを設定する必要があります。そこで使われるのが指示書インスタンスです。指示書インスタンスに通信情報を書き込み、それを通信用インスタンスへ送ることでシリアル通信の設定が完了するのです。ですので、指示書インスタンスを作成します。

SoftwareSerialというクラスが設計図となります。名前はDFPSerialSettingとします。作成する際に、引数としてポート情報を渡します。さらに、インスタンス関数beginへ引数を通信速度として渡します。これによって、ポート情報と通信速度がかかれた指示書が作成されました。

```arduino
SoftwareSerial DFPSerialSetting(2,3);
DFPSerialSetting.begin(9600);
```



通信用インスタンスへ指示書を送ります。通信インスタンスのインスタンス関数beginの引数をDFPSerialSettingに設定することで受け渡しが完了し、またシリアル通信が開始されます。

```arduino
DFP.begin(DFPSerialSetting);
```



#### LiquidCrystal



> ライブラリ「LiquidCrystal.h」のインストールが必要です。

> また、コードの頭で
>```arduino
>#include<LiquidCrystal.h>
>```
> を設定することを忘れないでください。

```arduino
LiquidCrystal lcd(8, 9, 4, 5, 6, 7);
lcd.begin(16, 2);
```

まず、通信インスタンスを作成します。名前はlcdです。設計図にあたるクラスはLiquidCrystalです。

通信インスタンスを作成する際に、ポート情報を渡しています。また、行数列数を引数としてbegin関数を呼び出すことで、シリアル通信の設定は完了します。

#### PCとのシリアル通信

PCとのシリアル通信を担当する通信インスタンスは、デフォルトで作成されます。ですので、新たに作成する必要はないです。

シリアル通信の設定は行う必要があります。関数beginの引数として通信速度を渡すことで設定が完了します。

```arduino
Serial.begin(9600);
```

